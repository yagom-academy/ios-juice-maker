# ì¥¬ìŠ¤ë©”ì´ì»¤ í”„ë¡œì íŠ¸ ğŸ§ƒ
ì¥¬ìŠ¤ ë©”ì´ì»¤ê°€ ë ˆì‹œí”¼ì— ë”°ë¼ í›„ë¥´ì¸  ìŠ¤í† ì–´ì˜ ê³¼ì¼ì„ ì‚¬ìš©í•˜ì—¬ ì¥¬ìŠ¤ë¥¼ ë§Œë“œëŠ” í”„ë¡œì íŠ¸

---
## ëª©ì°¨ ğŸ“‹
1. [íŒ€ì› ì†Œê°œ](#1-íŒ€ì›-ì†Œê°œ)
2. [íƒ€ì„ ë¼ì¸](#2-íƒ€ì„ë¼ì¸-230102--230120)
3. [í”„ë¡œì íŠ¸ ìˆœì„œë„](#3-í”„ë¡œì íŠ¸-ìˆœì„œë„)
4. [ì‹¤í–‰í™”ë©´](#4-ì‹¤í–‰í™”ë©´)
5. [íŠ¸ëŸ¬ë¸” ìŠˆíŒ…](#5-íŠ¸ëŸ¬ë¸”-ìŠˆíŒ…)
6. [ì°¸ê³  ë§í¬](#6-ì°¸ê³ -ë§í¬)

---
## 1. íŒ€ì› ì†Œê°œ
|Andrew|í˜œëª¨ë¦¬|
|---|---|
|<img src="https://github.com/Andrew-0411/ios-juice-maker/blob/step1/images/Andrew.png" width="250">|<img src="https://github.com/Andrew-0411/ios-juice-maker/blob/step1/images/hyemory.png" width="250">|

## 2. íƒ€ì„ë¼ì¸ (23.01.02. ~ 23.01.20.)
|ë‚ ì§œ|ì§„í–‰ ë‚´ìš©|
|---|---|
|2023-01-02|í”„ë¡œì íŠ¸ ì‹œì‘ <br/> FruitStore, JuiceMaker íƒ€ì…ê³¼ ê° ê¸°ëŠ¥ êµ¬í˜„|
|2023-01-03|ë„¤ì´ë° ì •ë¦¬, í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‚­ì œ í›„ STEP1 PR ë°œì†¡|
|2023-01-04|review ë‚´ìš© í™•ì¸ ë° ë°˜ì˜ (ê¸°ëŠ¥ ë¶„ë¦¬, ì ‘ê·¼ ì œì–´ì ì¶”ê°€)|
|2023-01-05|FruitStoreì˜ stock í”„ë¡œí¼í‹°ë¥¼ ì€ë‹‰í™”í•˜ë„ë¡ ê¸°ëŠ¥ ë¶„ë¦¬
|2023-01-06|STEP2 ì§„í–‰ ì‹œì‘, UIKit í•™ìŠµ|
|2023-01-09|ë¯¸ì…˜ ì „ì²´ ë‚´ìš© ìˆ˜í–‰ ë° STEP2 PR ë°œì†¡|
|2023-01-10|ì‹±ê¸€í†¤, notification í•™ìŠµ|
|2023-01-11|Auto-Sizing, Auto-Layout í•™ìŠµ|
|2023-01-12|stepper ìƒì„±, ì‹±ê¸€í†¤, notification, AutoLayout ì¶”ê°€|
|2023-01-13|ì½”ë“œ ì»¨ë²¤ì…˜ ì •ë¦¬ ë° STEP3 PR ë°œì†¡|

## 3. í”„ë¡œì íŠ¸ ìˆœì„œë„
<img src="https://github.com/Andrew-0411/ios-juice-maker/blob/3edc3de4f1aee5ba4fa858eb5f604a47281a6dac/images/JuiceMakerFlowchart.jpg" width="550">

## 4. ì‹¤í–‰í™”ë©´
![fruitStore](https://user-images.githubusercontent.com/45560895/212246572-87854fb2-1b59-4c61-9c41-3e5d6802f328.gif)

## 5. íŠ¸ëŸ¬ë¸” ìŠˆíŒ…
#### ğŸ”’ **ê³¼ì¼ê³¼ ì¬ê³  ìˆ˜ëŸ‰ì„ í•¨ê»˜ ë‹´ëŠ” ë°©ë²•?** <br/> 
- ê³¼ì¼ê³¼ ê³¼ì¼ì˜ ì¬ê³  ìˆ˜ëŸ‰ì„ ë‹´ëŠ” ë°©ë²•ì„ ê³ ë¯¼í•˜ë‹¤ê°€ `Dictionary`ë¥¼ ì‚¬ìš©í•˜ì—¬ ê³¼ì¼ì€ ì¤‘ë³µë  ì¼ì´ ì—†ê³  ê³¼ì¼ê³¼ ì¬ê³ ë¥¼ ë¬¶ì–´ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ íš¨ìœ¨ì ì´ë¼ íŒë‹¨í•˜ì—¬ ê³¼ì¼(key), ì¬ê³  ìˆ˜ëŸ‰(value)ì„ í•œë²ˆì— ë‹´ì•˜ìŠµë‹ˆë‹¤.
ì´ì™€ ê°™ì€ ì˜ë„ë¡œ ê° ì¥¬ìŠ¤ì˜ ë ˆì‹œí”¼ë„ `Dictionary`ë¥¼ ì‚¬ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.

#### ğŸ”’ **Cannot use instance member 'Labelëª…' within property initializer; property initializers run before 'self' is available** <br/>
- ì´ë²ˆ í”„ë¡œì íŠ¸ì—ì„œëŠ” ê³¼ì¼ì˜ ì¢…ë¥˜ì™€ UI ì˜¤ë¸Œì íŠ¸ë¥¼ ì—°ê²°í•˜ê¸°ìœ„í•´ ë”•ì…”ë„ˆë¦¬ë¥¼ ë§ì´ ì‚¬ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.
ê·¸ëŸ¬ë‚˜ UIì˜¤ë¸Œì íŠ¸ë¥¼ ì„ ì–¸í•˜ë©´ ì„ ì–¸í•  ë‹¹ì‹œì—ëŠ” ì´ˆê¸°ê°’ì´ ì—†ê¸° ë•Œë¬¸ì— ê·¸ëŒ€ë¡œ ë”•ì…”ë„ˆë¦¬ë¡œ ë‹´ìœ¼ë ¤ê³  í•˜ë©´ í•´ë‹¹ ì»´íŒŒì¼ ì˜¤ë¥˜ë¥¼ ë§Œë‚©ë‹ˆë‹¤.
êµ¬ê¸€ë§ ê²°ê³¼ `lazy` í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ë©´ ì„ ì–¸í•˜ê³ ì„œ ë°”ë¡œê°€ ì•„ë‹Œ, ì‚¬ìš©ë  ë•Œ ë©”ëª¨ë¦¬ì— í• ë‹¹ë˜ê¸° ë•Œë¬¸ì— ì˜¤ë¥˜ê°€ ë°œìƒí•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.
ì‚¬ìš©ë˜ëŠ” í•¨ìˆ˜ì—ì„œ ì§€ì—­ë³€ìˆ˜ë¡œ ì„ ì–¸í•˜ë©´ `lazy`ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì•„ë„ ë˜ì§€ë§Œ, ì½”ë“œ ê°€ë…ì„±ì„ ìœ„í•´ í”„ë¡œí¼í‹°ë¡œ ì„ ì–¸í•˜ì˜€ìŠµë‹ˆë‹¤.

```swift
@IBOutlet private weak var strawberryLabel: UILabel!
@IBOutlet private weak var bananaLabel: UILabel!
@IBOutlet private weak var pineappleLabel: UILabel!
@IBOutlet private weak var kiwiLabel: UILabel!
@IBOutlet private weak var mangoLabel: UILabel!
    
private lazy var fruitStockValue: [FruitStore.Fruit: UILabel] = [
    .strawberry: strawberryLabel,
    .banana: bananaLabel,
    .pineapple: pineappleLabel,
    .kiwi: kiwiLabel,
    .mango: mangoLabel
]
```

#### ğŸ”’ **ì¥¬ìŠ¤ë¥¼ ë§Œë“œëŠ” ê¸°ëŠ¥(`makeJuice` ë©”ì„œë“œ)ê³¼ ê³¼ì¼ì„ ë¹¼ëŠ” ê¸°ëŠ¥(`substractFruit` ë©”ì„œë“œ)** <br/> 
- ì²˜ìŒì—” `makeJuice` ë©”ì„œë“œì— `FruitStore`ì˜ ì¬ê³  ì •ë³´ë¥¼ ê°€ì ¸ì™€ì„œ í•¨ê»˜ ë¹„êµí•˜ë ¤ê³  í•˜ì˜€ëŠ”ë°, ì—­í• ì„ ë‚˜ëˆ„ê³ ì `FruitStore` íƒ€ì…ì—ì„œ ì¬ê³  ì •ë³´ì™€ í•„ìš”í•œ ê³¼ì¼ì˜ ê°œìˆ˜ë¥¼ ë¹„êµí•˜ì—¬ ì‚¬ìš©í•œ ê³¼ì¼ì˜ ê°œìˆ˜ë¥¼ ë¹¼ì£¼ëŠ” `substractFruit` ë©”ì„œë“œë¥¼ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.

#### ğŸ”’ **Result Type ì‚¬ìš© ì‹œ ì—ëŸ¬ì²˜ë¦¬?** <br/> 
- ì—ëŸ¬ì²˜ë¦¬ë¥¼ ìœ„í•´ ë§Œë“  ì—´ê±°í˜• `JuiceMakerError`ê°€ Error í”„ë¡œí† ì½œì„ ì±„íƒí•  ë¿ì´ë¼ ë§ˆì§€ë§‰ì— catchí•œ errorì™€ í•¨ê»˜ `failure`ì˜ Errorë¡œ ë¬¶ì„ ìˆ˜ê°€ ì—†ì—ˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ extensionì„ ì´ìš©í•˜ì—¬ `LocalizedError` í”„ë¡œí† ì½œì„ ìˆ˜ì •í•˜ì˜€ê³  í•˜ë‚˜ì˜ errorë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ëìŠµë‹ˆë‹¤. ë˜í•œ `LocalizedError`ì˜ `localizedDescription` ê¸°ëŠ¥ìœ¼ë¡œ ì˜¤ë¥˜ì— ëŒ€í•œ ë¬¸êµ¬ ì¶œë ¥ë„ ê°„í¸í•´ì¡ŒìŠµë‹ˆë‹¤.
```swift
func makeJuice(_ juice: Juice) -> Result<Juice, Error> {
    do {
        try checkFruitStore(for: juice)
        try useFruit(for: juice)
        return .success(juice)
    } catch let error {
        return .failure(error)
    }
}
```

#### ğŸ”’ **ì‹±ê¸€í†¤ì˜ ë‹¨ì ** <br/>
- `FruitStore` í´ë˜ìŠ¤ì— `shared`ë¼ëŠ” ì‹±ê¸€í†¤ë§Œ ì‚¬ìš©í•˜ë©´ í¸í•˜ê²Œ ì¬ê³ ë¥¼ ìˆ˜ì •í•  ìˆ˜ ìˆì—ˆìœ¼ë‚˜,
ì‹±ê¸€í†¤ì„ ì—¬ê¸°ì €ê¸°ì„œ ë‚¨ë°œí•˜ë©´ ê²°í•©ë„ê°€ ì¦ê°€í•œë‹¤ê³  íŒë‹¨í•˜ì—¬ `NotificationCenter`ë¥¼ ì ìš©í•˜ê¸°ë¡œ ê²°ì •í–ˆìŠµë‹ˆë‹¤.

#### ğŸ”’ **notification ì ìš©í•˜ê¸°** <br/>
- í˜„ì¬ ìƒíƒœì—ì„œ ì–´ë–»ê²Œí•˜ë©´ ì¡°ê¸ˆì´ë¼ë„ ê²°í•©ë„ë¥¼ ë‚®ì¶œì§€ ê³ ë¯¼í•´ ë³´ì•˜ìŠµë‹ˆë‹¤.
FruitStoreViewController í´ë˜ìŠ¤ì—ì„œ ë°”ë¡œ ì¬ê³ ë¥¼ ì—…ë°ì´íŠ¸í•˜ì§€ ì•Šê³  notificationì— ì„¤ì •í•œ ì¬ê³ ë¥¼ ì „ë‹¬í•´ì„œ, JuiceMakerViewControllerê°€ ì—…ë°ì´íŠ¸í•˜ëŠ” ë°©ë²•ì„ ê³ ì•ˆí•´ ë³´ì•˜ìŠµë‹ˆë‹¤.

- a. ë³€ê²½í•œ ì¬ê³ ë¥¼ ë”•ì…”ë„ˆë¦¬ì— ë‹´ì•„ notification centerì— ì „ë‹¬í•˜ê¸°
```swift
// ìˆ˜ì •í•œ ì¬ê³ ë¥¼ ë¹ˆ ë”•ì…”ë„ˆë¦¬ì— ë‹´ê¸°
private func addStockListByStepper() -> [FruitStore.Fruit: Int] {
    var stockList: [FruitStore.Fruit: Int] = [:]
        
    for (fruit, value) in fruitStockValue {
        guard let quantityAdded = value.text, let stockToBeAdded = Int(quantityAdded) else {
            return addStockListByStepper()
        }
        stockList[fruit] = stockToBeAdded
    }
    return stockList
}

// FruitStoreViewController viewWillDisappearì— post ì¶”ê°€
center.post(name: .stockNotification, object: nil,
                    userInfo: ["newStock": addStockListByStepper()])
```

- b. ë°›ì•„ì˜¨ notificationì„ í˜„ì¬ ì¬ê³ ì— ë°˜ì˜í•˜ê¸°
```swift
// JuiceMakerViewController viewDidLoadì— ì˜µì €ë²„ ì¶”ê°€
center.addObserver(self, selector: #selector(updateStock(_:)), name: .stockNotification, object: nil)

// ë°›ì•„ì˜¨ notificationì„ ì¬ê³ ì— ë°˜ì˜
@objc private func updateStock(_ noti: Notification) {
    guard let addStockList = noti.userInfo?["newStock"] as? [FruitStore.Fruit: Int] else {
        return
    }
        
    for (fruit, afterStock) in addStockList {
        let beforeStock = FruitStore.shared.checkStockValue(fruit: fruit)
            
        if beforeStock != afterStock {
            let finalStock = afterStock - beforeStock
            try? FruitStore.shared.addStock(fruit: fruit, amount: finalStock)
        }
    }
}
```

#### ğŸ”’ **ì´ˆê¸°ê°’ì´ ìˆëŠ” stepperì˜ value ì¦ê°** <br/> 
- ê³¼ì¼ `Label`ì— í˜„ì¬ ì¬ê³ ë¥¼ ì ìš©í•˜ê³  `stepper`ë¡œ ì¬ê³ ë¥¼ ìˆ˜ì •í•˜ë¼ëŠ” ìš”êµ¬ì‚¬í•­ì´ ìˆì—ˆìŠµë‹ˆë‹¤.
ì²˜ìŒì—” ê³¼ì¼ Labelë“¤ì˜ ê°’ì— stepper ì•¡ì…˜ì„ ë”í•´ì„œ ê·¸ ê²°ê³¼ë¥¼ Labelì— ë‹´ì•„ë³´ë ¤ê³  í–ˆìœ¼ë‚˜...

```swift
@IBAction private func changeStrawberryStock(_ sender: UIStepper) {
        strawberryLabel.text = "\((Int(strawberryLabel.text ?? "0") ?? 0) + Int(sender.value))"
    }
```

- stepperì˜ ì¦ê°€ ê°’ì´ (í˜„ì¬ì¬ê³ +1) + (í˜„ì¬ì¬ê³ +2) + (í˜„ì¬ì¬ê³ +3) + (í˜„ì¬ì¬ê³ +4) + (í˜„ì¬ì¬ê³ +5)...ê°€ ë˜ëŠ” ë°”ëŒì— stepperì— ì´ˆê¸°ê°’ì„ ë„£ì–´ì£¼ëŠ” ë°©ë²•ìœ¼ë¡œ ë³€ê²½í–ˆìŠµë‹ˆë‹¤.
ì•ì„œ ì‚¬ìš©í•œ í˜„ì¬ ì¬ê³ ë¥¼ Labelì— ì—…ë°ì´íŠ¸í•˜ëŠ” ë°©ë²•ê³¼ ê°™ì´ ê°ê°ì˜ ê³¼ì¼, stepperë¥¼ ë”•ì…”ë„ˆë¦¬ë¡œ ì§ì„ ì§€ì–´ì¤€ë‹¤ìŒ `for-in` êµ¬ë¬¸ìœ¼ë¡œ ì´ˆê¸°ê°’ì„ ì ìš©í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.

```swift
private lazy var fruitStockStepper: [FruitStore.Fruit: UIStepper] = [
        .strawberry: strawberryStepper,
        .banana: bananaStepper,
        .pineapple: pineappleStepper,
        .kiwi: kiwiStepper,
        .mango: mangoStepper
]

private func setFruitStepper() {
        for (fruit, stepper) in fruitStockStepper {
            stepper.value = Double(FruitStore.shared.checkStockValue(fruit: fruit))
        }
}
```

#### ğŸ”’ **Storyboard AutoLayoutì— stackView ì ìš©í•˜ê¸°** <br/>
- stackViewë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì„ì‹œ ê°ì²´ í•˜ë‚˜ í•˜ë‚˜ë¥¼ AutoLayoutì„ ì„¤ì •í•´ ì¤˜ì•¼ í•˜ë©° ì¼ì •í•œ ê°„ê²©ìœ¼ë¡œ layoutì„ ë°°ì¹˜í•˜ê¸°ê°€ ê¹Œë‹¤ë¡œì› ìŠµë‹ˆë‹¤. <br/>
<img src="https://github.com/Andrew-0411/ios-juice-maker/blob/f82289b0209f3b7c0c063d428d142c17336d4e9c/images/autolayout.png" width="550">

- Storyboardì— ìˆëŠ” stackView ê¸°ëŠ¥ìœ¼ë¡œ Image, Label, Stepperë¥¼ stackViewë¡œ ì„¤ì •í•˜ê³  ì„¤ì •í•œ ê°ì²´ë“¤ì„ ë‹¤ì‹œ í•œë²ˆ stackViewë¡œ ì„¤ì •í•˜ë¯€ë¡œì¨ ì¼ì •í•œ ê°„ê²©ìœ¼ë¡œ layoutì„ ë°°ì¹˜í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. <br/>
<img src="https://github.com/Andrew-0411/ios-juice-maker/blob/f82289b0209f3b7c0c063d428d142c17336d4e9c/images/stackView.png" width="250">

## 6. ì°¸ê³  ë§í¬
1. [ì• í”Œ ê°œë°œì ê³µì‹ë¬¸ì„œ : Result](https://developer.apple.com/documentation/swift/result)
2. [ì• í”Œ ê°œë°œì ê³µì‹ë¬¸ì„œ : LocalizedError](https://developer.apple.com/documentation/foundation/localizederror)
3. [ì• í”Œ ê°œë°œì ê³µì‹ë¬¸ì„œ : AutoLayout](https://developer.apple.com/library/archive/documentation/UserExperience/Conceptual/AutolayoutPG/index.html)
4. [ì• í”Œ ê°œë°œì ê³µì‹ë¬¸ì„œ : NotificationCenter](https://developer.apple.com/documentation/foundation/notificationcenter)
5. [ì• í”Œ ê°œë°œì ê³µì‹ë¬¸ì„œ : Stepper](https://developer.apple.com/documentation/swiftui/stepper)
6. [ì• í”Œ ê°œë°œì ê³µì‹ë¬¸ì„œ : UIStepper](https://developer.apple.com/documentation/uikit/uistepper)
7. [ì• í”Œ ê°œë°œì ê³µì‹ë¬¸ì„œ : Singleton](https://developer.apple.com/documentation/swift/managing-a-shared-resource-using-a-singleton)
8. [Cannot use instance member within property initializer ì»´íŒŒì¼ ì˜¤ë¥˜](https://yeniful.tistory.com/54)
